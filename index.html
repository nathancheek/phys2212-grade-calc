<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="style.css">
        <title>PHYS2212 Grade Calculator</title>

        <script type="text/javascript">
            //El Goog
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-30141240-2', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body>
        <nav class="navbar navbar-default navbar-fixed-top">
          <div class="container">
            <div class="navbar-header">
              <a class="navbar-brand" href="#">PHYS2212 Grade Calculator</a>
            </div>
          </div>
        </nav>

        <div class="container">
            <div class="page-header">
                <h1 class="text-center">Calculate your GA Tech PHYS2212 Grade</h1>
            </div>
            <div class="inputs">
                <div class="columns">
                    <h3>Test 1</h3>
                    <input type="number" class="form-control" id="test1" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Test 2</h3>
                    <input type="number" class="form-control" id="test2" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Test 3</h3>
                    <input type="number" class="form-control" id="test3" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Test 4</h3>
                    <input type="number" class="form-control" id="test4" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Final Exam</h3>
                    <input type="number" class="form-control" id="exam" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Lab</h3>
                    <input type="number" class="form-control" id="lab" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Lab Quiz</h3>
                    <input type="number" class="form-control" id="labquiz" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Clickers</h3>
                    <input type="number" class="form-control" id="clickers" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Homework</h3>
                    <input type="number" class="form-control" id="homework" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Optional</h3>
                    <input type="number" class="form-control" id="optional" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Wiki</h3>
                    <input type="number" class="form-control" id="wiki" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Reading</h3>
                    <input type="number" class="form-control" id="reading" placeholder="Grade">
                </div>
                <div class="columns">
                    <h3>Public Lectures</h3>
                    <input type="number" class="form-control" id="publiclectures" placeholder="Grade">
                </div>
            </div>
            <div class="text-center">
                <button type="button" class="btn btn-lg btn-success" onclick="calculate()">Calculate</button>
            </div>
            <hr>
            <div id="result">
                <div class="result-row">
                    <h2 class="text-center">Categories</h2>
                    <div class="columns">
                        <h3>Test average</h3>
                        <div id="testResult"></div>
                    </div>
                    <div class="columns">
                        <h3>Extra credit</h3>
                        <div id="extracreditResult"></div>
                    </div>
                    <div class="columns">
                        <h3>Bucket</h3>
                        <div id="bucketResult"></div>
                    </div>
                    <div class="columns">
                        <h3>Core</h3>
                        <div id="coreResult"></div>
                    </div>
                </div>
                <div class="result-row">
                    <h2 class="text-center">Final Grade</h2>
                    <h2 id="finalResult" class="text-center"></h2>
                </div>
            </div>
        </div>
        <script>
        $(".columns").addClass("col-lg-2 col-md-3 col-sm-4 col-xs-6");
        function calculate() {
            //Thanks for reading :D
            $("#result").hide();
            var test1 = parseFloat($("#test1").val());
            var test2 = parseFloat($("#test2").val());
            var test3 = parseFloat($("#test3").val());
            var test4 = parseFloat($("#test4").val());
            var exam = parseFloat($("#exam").val());
            var lab = parseFloat($("#lab").val());
            var labquiz = parseFloat($("#labquiz").val());
            var clickers = parseFloat($("#clickers").val());
            var homework = parseFloat($("#homework").val());
            var optional = parseFloat($("#optional").val());
            var wiki = parseFloat($("#wiki").val());
            var reading = parseFloat($("#reading").val());
            var publiclectures = parseFloat($("#publiclectures").val());

            if (isNaN(test1+test2+test3+test4+exam+lab+labquiz+clickers+homework+optional+reading+publiclectures)) {
                alert("Please fill out all sections");
                return;
            }
            var finalGrade = 0;
            finalGrade += exam * .25;
            finalGrade += lab * .15;
            finalGrade += labquiz * .05;

            //Calculate tests
            var tests = [test1, test2, test3, test4];
            tests.sort();
            var testPoints = 0;
            testPoints += tests[0] * .06;
            testPoints += tests[1] * .09;
            testPoints += tests[2] * .12;
            testPoints += tests[3] * .18;
            finalGrade += testPoints;
            var coreGrade = finalGrade / .9;
            var testGrade = testPoints / .45;

            //Calculate bucket points
            var bucketPoints = 0;
            bucketPoints += clickers * .03;
            bucketPoints += homework * .05;
            bucketPoints += optional * .02;
            bucketPoints += wiki * .02;
            bucketPoints += reading * .01;
            bucketPoints += publiclectures * .02;

            //Max bucket points at 10 and handle bonus points
            var extracreditPoints = 0;
            if (bucketPoints > 10) {
                if (bucketPoints > 12) {
                    extracreditPoints = 2;
                } else {
                    extracreditPoints = bucketPoints - 10;
                }
                bucketPoints = 10;
            }
            finalGrade += bucketPoints;
            var bucketGrade = bucketPoints / .10;

            finalGrade += extracreditPoints;
            var extracreditGrade = extracreditPoints / .10;
            //Set values in page
            $("#finalResult").text(Math.round(finalGrade*100)/100);
            $("#testResult").text(Math.round(testGrade*100)/100);
            $("#extracreditResult").text(Math.round(extracreditGrade*100)/100);
            $("#bucketResult").text(Math.round(bucketGrade*100)/100);
            $("#coreResult").text(Math.round(coreGrade*100)/100);

            $("#result").show();
        }
        </script>

        <footer class="footer">
          <div class="footer-vertical-outer container">
            <p class="text-muted footer-vertical-inner">Created by <a href="http://nathancheek.com">Nathan Cheek</a> - Address all complaints to /dev/null (Actually, please let me know if this is broken)</p>
          </div>
        </footer>
    </body>
</html>
